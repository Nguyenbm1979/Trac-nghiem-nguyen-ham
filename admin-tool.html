<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>C√¥ng C·ª• M√£ H√≥a ƒê·ªÅ Thi & M·∫≠t Kh·∫©u</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f4f9; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; }
        textarea { width: 100%; height: 200px; padding: 10px; margin-top: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 14px; }
        button { background: #27ae60; color: white; border: none; padding: 15px 30px; font-size: 18px; font-weight: bold; cursor: pointer; display: block; margin: 20px auto; border-radius: 5px; }
        button:hover { background: #219150; }
        .section { margin-bottom: 30px; padding: 20px; border: 1px solid #eee; border-radius: 8px; background: #fafafa; }
        .section h3 { margin-top: 0; color: #d35400; }
    </style>
</head>
<body>
    <div class="container">
        <h1>C√îNG C·ª§ H·ªñ TR·ª¢ GI√ÅO VI√äN</h1>

        <div class="section">
            <h3>1. ƒê·∫∑t M·∫≠t Kh·∫©u Cho ƒê·ªÅ Thi</h3>
            <p>Nh·∫≠p m·∫≠t kh·∫©u b·∫°n mu·ªën ƒë·∫∑t (V√≠ d·ª•: 123456):</p>
            <input type="text" id="passInput" placeholder="Nh·∫≠p m·∫≠t kh·∫©u..." style="padding:10px; width:300px">
            <button onclick="hashPass()" style="display:inline-block; margin:0 10px; padding:10px 20px; font-size:14px">L·∫•y M√£ H√≥a</button>
            <br><br>
            <strong>Copy d√≤ng n√†y d√°n v√†o file d·ªØ li·ªáu:</strong><br>
            <input type="text" id="passOutput" readonly style="width:100%; padding:10px; background:#eee; border:1px solid #ccc; font-family:monospace">
        </div>

        <div class="section">
            <h3>2. M√£ H√≥a To√†n B·ªô ƒê·ªÅ Thi</h3>
            <textarea id="inputData" placeholder="D√°n code window.EXAM_DATA = {...} v√†o ƒë√¢y..."></textarea>
            <button onclick="encryptData()">üîí M√É H√ìA ƒê·ªÄ THI</button>
            <textarea id="outputData" readonly placeholder="K·∫øt qu·∫£ s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
        </div>
    </div>

    <script>
        function hash(input) { return CryptoJS.MD5(String(input).trim().toLowerCase()).toString(); }

        // H√†m t·∫°o m·∫≠t kh·∫©u
        function hashPass() {
            let p = document.getElementById('passInput').value;
            if(!p) return alert("Ch∆∞a nh·∫≠p m·∫≠t kh·∫©u!");
            let hashed = hash(p);
            // T·∫°o s·∫µn d√≤ng code cho th·∫ßy copy
            document.getElementById('passOutput').value = `"password": "${hashed}",`;
        }

        // H√†m m√£ h√≥a ƒë·ªÅ thi
        function encryptData() {
            const raw = document.getElementById('inputData').value;
            let dataObj;
            try {
                const jsonPart = raw.substring(raw.indexOf('{'), raw.lastIndexOf('}') + 1);
                const func = new Function("return " + jsonPart);
                dataObj = func();
            } catch (e) { return alert("L·ªói c√∫ ph√°p d·ªØ li·ªáu!"); }

            if(dataObj.questions) {
                dataObj.questions.forEach(q => {
                    if(q.type === 'mcq') q.ans = hash(q.ans); 
                    else if(q.type === 'tf') q.items.forEach(item => item.ans = hash(item.ans));
                    else if(q.type === 'short') q.ans = hash(q.ans); 
                });
            }
            const finalString = "window.EXAM_DATA = " + JSON.stringify(dataObj, null, 4) + ";";
            document.getElementById('outputData').value = finalString;
            alert("ƒê√£ m√£ h√≥a xong!");
        }
    </script>
</body>
</html>
